---
import { type Language, getTranslations, defaultLang, getLocalizedPath } from '@/i18n'

interface Props {
  lang?: Language
}

const { lang = defaultLang } = Astro.props
const t = getTranslations(lang)

// Icon mapping for transport services
const icons = {
  truck: `<svg class="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 17a2 2 0 11-4 0 2 2 0 014 0zM19 17a2 2 0 11-4 0 2 2 0 014 0z" />
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10a1 1 0 001 1h1m8-1a1 1 0 01-1 1H9m4-1V8a1 1 0 011-1h2.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V16a1 1 0 01-1 1h-1m-6-1a1 1 0 001 1h1M5 17a2 2 0 104 0m-4 0a2 2 0 114 0m6 0a2 2 0 104 0m-4 0a2 2 0 114 0" />
  </svg>`,
  plane: `<svg class="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
  </svg>`,
  ship: `<svg class="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 17h18M5 17l-2 4M19 17l2 4M12 3v10M7 8h10l-2 9H9L7 8z" />
  </svg>`
};

// Transport services with translations
const transportServices = [
  {
    icon: 'truck',
    title: t.transport.road.title,
    description: t.transport.road.description,
    features: t.transport.road.features,
    slug: 'road-freight'
  },
  {
    icon: 'plane',
    title: t.transport.air.title,
    description: t.transport.air.description,
    features: t.transport.air.features,
    slug: 'air-freight'
  },
  {
    icon: 'ship',
    title: t.transport.sea.title,
    description: t.transport.sea.description,
    features: t.transport.sea.features,
    slug: 'sea-freight'
  }
];
---

<section id="services" class="section-padding bg-gray-50 dark:bg-primary-900">
  <div class="container-custom">
    <!-- Section Header -->
    <div class="section-title">
      <span class="section-subtitle">{t.sections.services.subtitle}</span>
      <h2 class="text-3xl md:text-4xl font-bold text-primary-900 dark:text-white mb-4">
        {t.sections.services.title}
      </h2>
      <p class="text-gray-600 dark:text-gray-400 max-w-2xl mx-auto">
        {t.sections.services.description}
      </p>
    </div>

    <!-- Service Cards Grid -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 lg:gap-8 mt-12">
      {transportServices.map((service, index) => (
        <div 
          class="service-card group"
          style={`animation-delay: ${index * 100}ms`}
        >
          <!-- Icon -->
          <div class="service-card-icon">
            <Fragment set:html={icons[service.icon as keyof typeof icons]} />
          </div>

          <!-- Content -->
          <h3 class="text-xl font-bold text-primary-900 dark:text-white mb-3 group-hover:text-accent-500 transition-colors">
            {service.title}
          </h3>
          
          <p class="text-gray-600 dark:text-gray-400 mb-4">
            {service.description}
          </p>

          <!-- Features List -->
          <ul class="text-sm text-gray-500 dark:text-gray-400 space-y-2 mb-6 text-left rtl:text-right">
            {service.features.slice(0, 3).map((feature) => (
              <li class="flex items-center">
                <svg class="w-4 h-4 text-accent-500 mr-2 rtl:ml-2 rtl:mr-0 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                </svg>
                {feature}
              </li>
            ))}
          </ul>

          <!-- CTA -->
          <a 
            href={getLocalizedPath(`/services/logistics#${service.slug}`, lang)}
            class="inline-flex items-center text-accent-500 font-medium hover:text-accent-600 transition-colors"
          >
            {t.sections.services.learnMore}
            <svg class="w-4 h-4 ml-1 rtl:mr-1 rtl:ml-0 group-hover:translate-x-1 rtl:group-hover:-translate-x-1 transition-transform rtl:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
            </svg>
          </a>
        </div>
      ))}
    </div>

    <!-- Bottom CTA -->
    <div class="text-center mt-12">
      <a href={getLocalizedPath('/services', lang)} class="btn-secondary">
        {t.sections.services.viewAll}
        <svg class="w-5 h-5 ml-2 rtl:mr-2 rtl:ml-0 rtl:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
        </svg>
      </a>
    </div>
  </div>
</section>

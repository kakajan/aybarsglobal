---
import BaseLayout from '@/layouts/BaseLayout.astro'
import { formatDate } from '@/utils/formatDate'
import {
  type Language,
  supportedLanguages,
  defaultLang,
  getTranslations,
  getLocalizedPath,
} from '@/i18n'

export function getStaticPaths() {
  return supportedLanguages
    .filter((lang) => lang !== defaultLang)
    .map((lang) => ({
      params: { lang },
      props: { lang: lang as Language },
    }))
}

const { lang } = Astro.props
const t = getTranslations(lang)
const localizedHref = (path: string) => getLocalizedPath(path, lang)

// Get press releases from translations
const pressReleases = t.press.releases.map((release: any, index: number) => ({
  ...release,
  date: ['2024-12-15', '2024-11-28', '2024-10-15', '2024-09-01', '2024-07-20'][
    index
  ],
}))

const financialReleases = t.press.financialReports.map(
  (report: any, index: number) => ({
    ...report,
    date: ['2024-10-30', '2024-07-28', '2024-03-15', '2024-04-25'][index],
  })
)
---

<BaseLayout
  title={t.press.pageTitle}
  description={t.press.pageDescription}
  lang={lang}
>
  <!-- Hero Section -->
  <section
    class="relative py-20 md:py-28 bg-gradient-to-br from-primary-900 via-primary-800 to-primary-700"
  >
    <div class="absolute inset-0 bg-pattern opacity-5"></div>
    <div class="container-custom relative z-10">
      <div class="max-w-3xl">
        <span
          class="inline-block px-4 py-2 bg-white/10 backdrop-blur-sm rounded-full text-accent-400 text-sm font-medium mb-6"
        >
          {t.press.hero.badge}
        </span>
        <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold text-white mb-6">
          {t.press.hero.title}
        </h1>
        <p class="text-xl text-gray-300">{t.press.hero.description}</p>
      </div>
    </div>
  </section>

  <!-- Press Releases -->
  <section class="section-padding bg-white dark:bg-primary-950">
    <div class="container-custom">
      <div class="section-title">
        <span class="section-subtitle">{t.press.featured.subtitle}</span>
        <h2
          class="text-3xl md:text-4xl font-bold text-primary-900 dark:text-white mb-4"
        >
          {t.press.featured.title}
        </h2>
      </div>

      <div class="space-y-6 mt-12 max-w-4xl mx-auto">
        {
          pressReleases.map((release) => (
            <article class="card p-6 group">
              <div class="flex flex-col md:flex-row md:items-center gap-4">
                <div class="md:w-32 flex-shrink-0">
                  <time class="text-sm text-accent-500 font-medium ltr-nums">
                    {formatDate(release.date, lang)}
                  </time>
                </div>
                <div class="flex-1">
                  <h3 class="text-xl font-bold text-primary-900 dark:text-white group-hover:text-accent-500 transition-colors mb-2">
                    {release.title}
                  </h3>
                  <p class="text-gray-600 dark:text-gray-400">
                    {release.excerpt}
                  </p>
                  <a
                    href="#"
                    class="inline-flex items-center text-accent-500 font-medium mt-4 hover:text-accent-600 transition-colors"
                  >
                    {t.press.readMore}
                    <svg
                      class="w-4 h-4 ms-2 icon-flip"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M17 8l4 4m0 0l-4 4m4-4H3"
                      />
                    </svg>
                  </a>
                </div>
              </div>
            </article>
          ))
        }
      </div>

      <div class="text-center mt-12">
        <a href="#" class="btn-secondary">{t.press.all}</a>
      </div>
    </div>
  </section>

  <!-- Media Kit -->
  <section class="section-padding bg-gray-50 dark:bg-primary-900">
    <div class="container-custom">
      <div class="max-w-3xl mx-auto text-center">
        <span class="section-subtitle">{t.press.mediaKit.subtitle}</span>
        <h2
          class="text-3xl md:text-4xl font-bold text-primary-900 dark:text-white mb-4"
        >
          {t.press.mediaKit.title}
        </h2>
        <p class="text-gray-600 dark:text-gray-400 mb-8">
          {t.press.mediaKit.description}
        </p>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <a
            href="#"
            class="card p-6 text-center hover:border-accent-500 transition-colors"
          >
            <div
              class="w-12 h-12 mx-auto bg-primary-100 dark:bg-primary-800 rounded-xl flex items-center justify-center mb-4"
            >
              <svg
                class="w-6 h-6 text-primary-600 dark:text-primary-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"
                ></path>
              </svg>
            </div>
            <span class="font-medium text-primary-900 dark:text-white"
              >{t.press.mediaKit.brandAssets}</span
            >
          </a>
          <a
            href="#"
            class="card p-6 text-center hover:border-accent-500 transition-colors"
          >
            <div
              class="w-12 h-12 mx-auto bg-accent-100 dark:bg-accent-900/30 rounded-xl flex items-center justify-center mb-4"
            >
              <svg
                class="w-6 h-6 text-accent-600 dark:text-accent-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                ></path>
              </svg>
            </div>
            <span class="font-medium text-primary-900 dark:text-white"
              >{t.press.mediaKit.factSheet}</span
            >
          </a>
          <a
            href="#"
            class="card p-6 text-center hover:border-accent-500 transition-colors"
          >
            <div
              class="w-12 h-12 mx-auto bg-green-100 dark:bg-green-900/30 rounded-xl flex items-center justify-center mb-4"
            >
              <svg
                class="w-6 h-6 text-green-600 dark:text-green-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"
                ></path>
              </svg>
            </div>
            <span class="font-medium text-primary-900 dark:text-white"
              >{t.press.mediaKit.pressKit}</span
            >
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Contact CTA -->
  <section class="section-padding bg-primary-900">
    <div class="container-custom text-center">
      <h2 class="text-3xl md:text-4xl font-bold text-white mb-4">
        {t.contact.hero.title}
      </h2>
      <p class="text-gray-300 max-w-2xl mx-auto mb-8">
        {t.contact.hero.description}
      </p>
      <a href={localizedHref('/contact')} class="btn-accent btn-lg"
        >{t.common.contactUs}</a
      >
    </div>
  </section>
</BaseLayout>
